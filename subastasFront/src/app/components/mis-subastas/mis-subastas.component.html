<h1 class="text-center">Mis subastas</h1>
<div class="contenedorSubastas">
    @for (item of subastas; track $index) {
      <div class="card-subasta">
        <img [src]="item.imagenes[0]" alt="{{ item.title }}" />
        <div class="contenido">
          <h4>{{ item.title }}</h4>
          <p class="ubicacion">Ubicación: {{ item.ubicacion }}</p>
          <p>Finaliza: {{ item.fechaFin | date}}</p>
          <div class="d-flex justify-content-between align-items-center">
            <p class="precio"> {{ item.precioInicial | currency:'ARS':'symbol':'1.2-2':'es-AR'}} </p>
            <div class="nav-item dropdown btn btn-primary">
              <a class="nav-link dropdown-toggle" href="#" role="button"
                data-bs-toggle="dropdown" aria-expanded="false">
                Acciones
              </a>
              <ul class="dropdown-menu">
                <button [routerLink]="['/subasta/' + item.id]" class="dropdown-item" style="font-weight: 700;">Ver más →</button>
                <li><hr class="dropdown-divider"></li>
                <button class="dropdown-item" style="color: green; font-weight: 700;" (click)="modificar(item.id)">Modificar</button>
                <button class="dropdown-item" style="color: red; font-weight: 700;" (click)="eliminarSubasta(item.id)">Eliminar</button>
              </ul>
            </div>
          </div>
        </div>
      </div>
    }
  </div>

<div *ngIf="isModalOpen"
     class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center"
     style="background: rgba(0, 0, 0, 0.6); z-index: 1050;">

  <div class="bg-white p-4 rounded-4 shadow-lg animate__animated animate__fadeIn"
       style="max-width: 420px; width: 90%;">
    
       <form [formGroup]="formulario">
        <div class="mb-2">
          <label>Título:</label>
          <input type="text" class="form-control" formControlName="title">
        </div>

        <div class="mb-2">
          <label>Monto:</label>
          <input type="number" class="form-control" formControlName="monto">
        </div>

        <div class="mb-2">
          <label>Descripción:</label>
          <textarea class="form-control" formControlName="description"></textarea>
        </div>

        <div class="mb-3">
          <label>Ubicación:</label>
          <input type="text" class="form-control" formControlName="ubicacion">
        </div>

        <div class="mb-3">
          <label>Imágenes actuales:</label>
          <div *ngFor="let url of imagenesActuales; let i = index" class="d-flex align-items-center mb-1">
            <img [src]="url" alt="Imagen" width="60" class="me-2 rounded" />
            <button type="button" class="btn btn-danger btn-sm" (click)="eliminarImagen(i)">Eliminar</button>
          </div>
        </div>

        <!-- Agregar nuevas imágenes -->
        <div class="mb-3">
          <label>Agregar nuevas imágenes</label>
          <input type="url" class="form-control" [(ngModel)]="imagen" [ngModelOptions]="{standalone: true}" placeholder="URL de la imagen" />
          <button type="button" class="btn btn-outline-secondary" (click)="agregarImagen()">Agregar Imagen</button>
        </div>

        <button class="btn btn-primary w-100" (click)="guardarCambios()">Guardar cambios</button>
        <button class="btn btn-secondary mt-2 w-100" (click)="cerrarModal()">Cancelar</button>
      </form>
  </div>
</div>